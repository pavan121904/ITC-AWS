import json
import boto3

def lambda_handler(event, context):
    # Initialize CodePipeline and GitHub clients
    codepipeline = boto3.client('codepipeline')
    
    # Extract information from the GitHub webhook event
    github_event = json.loads(event['body'])
    
    # Check if it's a push event
    if github_event['action'] == 'push':
        # Start the CodePipeline execution
        response = codepipeline.start_pipeline_execution(
            name='YourCodePipelineName'
        )
        
        return {
            'statusCode': 200,
            'body': f'CodePipeline execution started with ID: {response["pipelineExecutionId"]}'
        }
    else:
        return {
            'statusCode': 200,
            'body': 'Ignoring non-push GitHub webhook event'
        }
